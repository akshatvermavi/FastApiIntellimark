2025-10-14 18:55:47 - INFO - Logging configured. Log file: .\exp_Test02_pipeline.log
2025-10-14 18:57:33 - INFO - --- Processing Key: Retail_ValueStore_Uptown Depot_Produce_PRD0019 ---
2025-10-14 18:57:33 - INFO -   Metadata -> seasonal=Y, hist_range=36+, hist_bucket=24+
2025-10-14 18:57:33 - INFO -   Models to run: ['HoltWinters', 'SARIMA', 'Prophet', 'TBF', 'LY_trend', 'RF_default', 'XGB_default', 'LGBM_default']
2025-10-14 18:57:33 - INFO -   Data splits -> train:30, validation:3, test:3
2025-10-14 18:57:33 - WARNING - AutoARIMA failed for series: All lag values up to 'maxlag' produced singular matrices. Consider using a longer series, a different lag term or a different test.
2025-10-14 18:57:43 - INFO -   Best Raw Model (Method A): LGBM_default
2025-10-14 18:57:43 - INFO -   Best Bias-Adjusted Model (Method B): LGBM_default
2025-10-14 18:57:47 - INFO - --- Finished processing Key: Retail_ValueStore_Uptown Depot_Produce_PRD0019 ---
2025-10-14 18:57:47 - INFO - --- Processing Key: Online_FreshMart_North Depot_Snacks_PRD0003 ---
2025-10-14 18:57:47 - INFO -   Metadata -> seasonal=N, hist_range=13–24, hist_bucket=13–24
2025-10-14 18:57:47 - INFO -   Models to run: ['TBF', 'L3M', 'L6M', 'LY_trend', 'RF_default', 'XGB_default', 'LGBM_default']
2025-10-14 18:57:47 - INFO -   Data splits -> train:20, validation:1, test:1
2025-10-14 18:57:49 - WARNING -   EXCEPTION running TBF in testing for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:49 - WARNING -   EXCEPTION running L3M in testing for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:49 - WARNING -   EXCEPTION running L6M in testing for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:49 - WARNING -   EXCEPTION running LY_trend in testing for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:50 - WARNING -   EXCEPTION running RF_default in testing for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:51 - WARNING -   EXCEPTION running XGB_default in testing for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:52 - WARNING -   EXCEPTION running LGBM_default in testing for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:52 - INFO -   Best Raw Model (Method A): LGBM_default
2025-10-14 18:57:52 - INFO -   Best Bias-Adjusted Model (Method B): LGBM_default
2025-10-14 18:57:52 - WARNING -   EXCEPTION during forecast for TBF for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:52 - WARNING -   EXCEPTION during forecast for L3M for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:52 - WARNING -   EXCEPTION during forecast for L6M for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:52 - WARNING -   EXCEPTION during forecast for LY_trend for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:53 - WARNING -   EXCEPTION during forecast for RF_default for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:53 - WARNING -   EXCEPTION during forecast for XGB_default for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:54 - WARNING -   EXCEPTION during forecast for LGBM_default for key Online_FreshMart_North Depot_Snacks_PRD0003: ValueError("non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)")
2025-10-14 18:57:54 - ERROR - !!! CRITICAL ERROR processing key Online_FreshMart_North Depot_Snacks_PRD0003. Skipping to next key. Error: non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)
Traceback (most recent call last):
  File "c:\Users\aksha\FastAPI\forecasting_pipeline.py", line 1616, in forecast_pipeline_debug
    fcst_A_adj = calculate_bias_adjustment(val_actuals, val_preds_dict.get(best_model_raw, pd.Series(dtype=float)), fcst_A_raw)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\aksha\FastAPI\forecasting_pipeline.py", line 47, in calculate_bias_adjustment
    bias = np.divide(
           ^^^^^^^^^^
ValueError: non-broadcastable output operand with shape (1,) doesn't match the broadcast shape (3,)
2025-10-14 18:57:54 - INFO - --- Processing Key: Retail_FoodBazaar_Uptown Depot_Frozen Foods_PRD0026 ---
2025-10-14 18:57:54 - INFO -   Metadata -> seasonal=N, hist_range=36+, hist_bucket=24+
2025-10-14 18:57:54 - INFO -   Models to run: ['TBF', 'L3M', 'L6M', 'Prophet', 'LY_trend', 'RF_default', 'XGB_default', 'LGBM_default']
2025-10-14 18:57:54 - INFO -   Data splits -> train:30, validation:3, test:3
2025-10-14 18:58:03 - INFO -   Best Raw Model (Method A): TBF
2025-10-14 18:58:03 - INFO -   Best Bias-Adjusted Model (Method B): TBF
2025-10-14 18:58:07 - INFO - --- Finished processing Key: Retail_FoodBazaar_Uptown Depot_Frozen Foods_PRD0026 ---
2025-10-14 18:58:07 - INFO - --- Processing Key: Retail_ValueStore_Harbor Depot_Snacks_PRD0005 ---
2025-10-14 18:58:07 - INFO -   Metadata -> seasonal=Y, hist_range=25–36, hist_bucket=24+
2025-10-14 18:58:07 - INFO -   Models to run: ['HoltWinters', 'SARIMA', 'Prophet', 'TBF', 'LY_trend', 'RF_default', 'XGB_default', 'LGBM_default']
2025-10-14 18:58:07 - INFO -   Data splits -> train:29, validation:3, test:3
2025-10-14 18:58:08 - WARNING - AutoARIMA failed for series: shapes (4,2) and (1,) not aligned: 2 (dim 1) != 1 (dim 0)
2025-10-14 18:58:17 - INFO -   Best Raw Model (Method A): RF_default
2025-10-14 18:58:17 - INFO -   Best Bias-Adjusted Model (Method B): RF_default
2025-10-14 18:58:25 - INFO - --- Finished processing Key: Retail_ValueStore_Harbor Depot_Snacks_PRD0005 ---
2025-10-14 18:58:25 - INFO - --- Processing Key: Retail_SuperShop_Harbor Depot_Produce_PRD0019 ---
2025-10-14 18:58:25 - INFO -   Metadata -> seasonal=N, hist_range=25–36, hist_bucket=24+
2025-10-14 18:58:25 - INFO -   Models to run: ['TBF', 'L3M', 'L6M', 'Prophet', 'LY_trend', 'RF_default', 'XGB_default', 'LGBM_default']
2025-10-14 18:58:25 - INFO -   Data splits -> train:25, validation:3, test:3
2025-10-14 19:01:09 - INFO -   Best Raw Model (Method A): LGBM_default
2025-10-14 19:01:09 - INFO -   Best Bias-Adjusted Model (Method B): LY_trend
2025-10-14 19:01:12 - INFO - --- Finished processing Key: Retail_SuperShop_Harbor Depot_Produce_PRD0019 ---
2025-10-14 19:01:15 - INFO - Pipeline finished. Saving output files...
2025-10-14 19:01:15 - INFO - ===================================
2025-10-14 19:01:15 - INFO - >>> FORECASTING PIPELINE COMPLETE <<<
2025-10-14 19:01:15 - INFO - ===================================
